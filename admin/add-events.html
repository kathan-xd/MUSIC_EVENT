<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Add Events | CampusEvents</title>

  <!-- ‚úÖ Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    html, body {
      height: 100%;
      margin: 0;
      display: flex;
      flex-direction: column;
    }

    body > .container {
      flex: 1;
    }

    body {
      background-color: #f3f8ff;
      font-family: 'Poppins', sans-serif;
      color: #333;
    }

    header {
      background-color: #007bff;
      color: white;
      text-align: center;
      padding: 20px;
      font-weight: 600;
      box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
    }

    .container {
      margin-top: 40px;
      max-width: 900px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1);
      padding: 40px;
    }

    h2 {
      text-align: center;
      color: #007bff;
      font-weight: 700;
      margin-bottom: 30px;
    }

    .form-control, .form-select {
      border-radius: 10px;
      border: 1px solid #cfd8e3;
      transition: 0.3s;
    }

    .form-control:focus, .form-select:focus {
      border-color: #007bff;
      box-shadow: 0 0 8px rgba(0, 123, 255, 0.2);
    }

    button {
      border-radius: 10px;
      transition: 0.3s;
      font-weight: 600;
    }

    button:hover {
      transform: scale(1.03);
      box-shadow: 0 5px 12px rgba(0, 123, 255, 0.3);
    }

    .btn-primary {
      background-color: #007bff;
      border: none;
    }

    .btn-primary:hover {
      background-color: #0056b3;
    }

    .event-list {
      margin-top: 40px;
    }

    .event-card {
      background-color: #f9fcff;
      border-left: 5px solid #007bff;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.05);
      transition: 0.3s;
    }

    .event-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 18px rgba(0, 123, 255, 0.15);
    }

    .btn-edit {
      background-color: #ffc107;
      color: white;
      border: none;
    }

    .btn-edit:hover {
      background-color: #e0a800;
    }

    .btn-delete {
      background-color: #dc3545;
      color: white;
      border: none;
    }

    .btn-delete:hover {
      background-color: #b02a37;
    }

    footer {
      background-color: #0d1b2a;
      color: #ddd;
      text-align: center;
      padding: 15px;
      margin-top: auto; /* ‚úÖ ensures footer stays at bottom */
      font-size: 14px;
    }

    footer span {
      color: #007bff;
      font-weight: 600;
    }

    .back-btn {
      margin-bottom: 25px;
    }
  </style>
</head>
<body>

  <header>
    <h1>üé∂ Add Events</h1>
  </header>

  <div class="container">
    <a href="admin-dashboard.html" class="btn btn-outline-primary back-btn">‚Üê Back to Dashboard</a>

    <h2>Add a New Event</h2>

    <form id="eventForm">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Event Name</label>
          <input type="text" id="eventName" class="form-control" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Event Date</label>
          <input type="date" id="eventDate" class="form-control" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Event Time</label>
          <input type="time" id="eventTime" class="form-control" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Category</label>
          <select id="eventCategory" class="form-select">
            <option>Music</option>
            <option>Dance</option>
            <option>Drama</option>
            <option>Sports</option>
            <option>Technical</option>
          </select>
        </div>
        <div class="col-12">
          <label class="form-label">Description</label>
          <textarea id="eventDescription" class="form-control" rows="3" required></textarea>
        </div>
      </div>
      <div class="text-center mt-4">
        <button type="submit" class="btn btn-primary px-5 py-2">Add Event</button>
      </div>
    </form>

    <div class="event-list mt-5">
      <h4 class="text-center text-primary mb-3">üìã Added Events</h4>
      <div id="eventContainer"></div>
    </div>
  </div>

  <footer>
    ¬© 2025 <span>CampusEvents</span>. Admin Panel for Event Management üéµ
  </footer>

  <script>
    const eventForm = document.getElementById('eventForm');
    const eventContainer = document.getElementById('eventContainer');

    // Load existing events
    let events = JSON.parse(localStorage.getItem('events')) || [];

    // Display events
    function displayEvents() {
      eventContainer.innerHTML = "";
      if (events.length === 0) {
        eventContainer.innerHTML = `<p class='text-center text-muted'>No events added yet.</p>`;
        return;
      }

      events.forEach((event, index) => {
        const eventCard = document.createElement('div');
        eventCard.classList.add('event-card');
        eventCard.innerHTML = `
          <h5>${event.name}</h5>
          <p><strong>Date:</strong> ${event.date}</p>
          <p><strong>Time:</strong> ${event.time}</p>
          <p><strong>Category:</strong> ${event.category}</p>
          <p><strong>Description:</strong> ${event.description}</p>
          <div class="d-flex gap-2">
            <button class="btn btn-edit btn-sm" onclick="editEvent(${index})">Edit</button>
            <button class="btn btn-delete btn-sm" onclick="deleteEvent(${index})">Delete</button>
          </div>
        `;
        eventContainer.appendChild(eventCard);
      });
    }

    // Add or update event
    eventForm.addEventListener('submit', (e) => {
      e.preventDefault();

      const event = {
        name: document.getElementById('eventName').value,
        date: document.getElementById('eventDate').value,
        time: document.getElementById('eventTime').value,
        category: document.getElementById('eventCategory').value,
        description: document.getElementById('eventDescription').value
      };

      const editIndex = eventForm.getAttribute('data-edit-index');
      if (editIndex !== null) {
        events[editIndex] = event;
        eventForm.removeAttribute('data-edit-index');
        alert('‚úÖ Event updated successfully!');
      } else {
        events.push(event);
        alert('üéâ Event added successfully!');
      }

      localStorage.setItem('events', JSON.stringify(events));
      eventForm.reset();
      displayEvents();
    });

    // Edit event
    function editEvent(index) {
      const event = events[index];
      document.getElementById('eventName').value = event.name;
      document.getElementById('eventDate').value = event.date;
      document.getElementById('eventTime').value = event.time;
      document.getElementById('eventCategory').value = event.category;
      document.getElementById('eventDescription').value = event.description;

      eventForm.setAttribute('data-edit-index', index);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Delete event
    function deleteEvent(index) {
      if (confirm('Are you sure you want to delete this event?')) {
        events.splice(index, 1);
        localStorage.setItem('events', JSON.stringify(events));
        displayEvents();
      }
    }

    // Initial render
    displayEvents();
  </script>
</body>
</html>
